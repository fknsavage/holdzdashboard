<!DOCTYPE html>
<html>
<head>
  <title>Card Image Debug</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body { background: #222; color: #fff; font-family: sans-serif; padding: 32px; }
    .container { margin:0 auto; max-width:400px; background: #333; border-radius:8px; padding:24px; }
    .img-url { color: #ff3155; margin-top:22px; word-break: break-all; font-size:15px; }
    img { display:block; margin:24px auto; border-radius:8px; box-shadow:0 2px 24px #000; max-width:90vw; max-height:50vh;}
    button { background:#ff3155; color: #fff; border:none; padding:12px 18px; border-radius:6px; font-weight:bold; font-size: 18px; cursor:pointer;}
  </style>
</head>
<body>
  <div class="container">
    <h2>Card Debugger</h2>
    <button id="fetch-btn">Fetch Card</button>
    <img id="card-img" src="" alt="Card" style="display:none;">
    <div id="img-url" class="img-url"></div>
  </div>
  <script>
    const btn = document.getElementById('fetch-btn');
    const img = document.getElementById('card-img');
    const imgUrlDiv = document.getElementById('img-url');
    btn.onclick = async () => {
      img.style.display = 'none';
      imgUrlDiv.textContent = '';
      imgUrlDiv.style.color = '#ff3155';
      // Plug in any valid PIN to test!
      const endpoint = 'https://holdznchill.onrender.com/validate-pin/3035';
      try {
        const res = await fetch(endpoint);
        if (!res.ok) throw new Error('HTTP ' + res.status);
        const data = await res.json();
        const cardUrl = (data.player && data.player.cards && data.player.cards.length)
          ? data.player.cards[0]
          : '';
        if(cardUrl){
          img.src = cardUrl;
          img.style.display = '';
          imgUrlDiv.textContent = cardUrl;
          imgUrlDiv.style.color = '#ff3155';
        } else {
          imgUrlDiv.textContent = 'No card URL returned from backend!';
          imgUrlDiv.style.color = '#fa0';
        }
      }catch(e){
        imgUrlDiv.textContent = 'Error: ' + (e && e.message ? e.message : e);
        imgUrlDiv.style.color = '#fa0';
      }
    };
  </script>
</body>
</html>
